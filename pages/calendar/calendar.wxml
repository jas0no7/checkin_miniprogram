<view class="container">
  <view class="card">
    <view class="section-title">当前习惯</view>
    <picker
      class="picker"
      mode="selector"
      range="{{habitNames}}"
      value="{{habitIndex}}"
      bindchange="onHabitChange"
    >
      <view class="row">
        <text class="picker-text">{{habitNames[habitIndex] || '请选择习惯'}}</text>
        <text class="tag">切换</text>
      </view>
    </picker>
    <view wx:if="{{habits.length === 0}}" class="muted">还没有习惯</view>
  </view>

  <view class="card">
    <view class="row">
      <button class="btn-ghost" size="mini" bindtap="onPrevMonth">上月</button>
      <text class="section-title">{{monthLabel}}</text>
      <button class="btn-ghost" size="mini" bindtap="onNextMonth">下月</button>
    </view>
    <view style="height: 16rpx"></view>
    <view class="grid">
      <view class="week-cell" wx:for="{{weekDays}}" wx:key="*this">{{item}}</view>
    </view>
    <view style="height: 12rpx"></view>
    <view class="grid">
      <view
        class="day-cell {{item.isEmpty ? 'empty' : ''}}"
        wx:for="{{days}}"
        wx:key="index"
      >
        <text>{{item.day}}</text>
        <view class="dot" wx:if="{{item.checked}}"></view>
      </view>
    </view>
  </view>
</view>
